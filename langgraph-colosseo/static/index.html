<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LangGraph Translation & Grammar Analysis</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #4ECDC4 0%, #45B7D1 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 15px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); overflow: hidden; }
        .header { background: linear-gradient(135deg, #4ECDC4 0%, #45B7D1 100%); color: white; padding: 30px; text-align: center; }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; font-weight: 300; }
        .header p { font-size: 1.1em; opacity: 0.9; }
        .content { padding: 40px; }
        .tabs { display: flex; margin-bottom: 30px; border-bottom: 2px solid #f0f0f0; }
        .tab { padding: 15px 30px; background: none; border: none; font-size: 16px; cursor: pointer; color: #666; transition: all 0.3s ease; border-bottom: 3px solid transparent; }
        .tab.active { color: #4ECDC4; border-bottom-color: #4ECDC4; }
        .tab:hover { color: #4ECDC4; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #333; }
        input, select, textarea { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px; transition: border-color 0.3s ease; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: #4ECDC4; }
        textarea { resize: vertical; min-height: 120px; }
        .language-selectors { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .btn { background: linear-gradient(135deg, #4ECDC4 0%, #45B7D1 100%); color: white; border: none; padding: 12px 30px; border-radius: 8px; font-size: 16px; cursor: pointer; transition: transform 0.3s ease; }
        .btn:hover { transform: translateY(-2px); }
        .btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
        .result { margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #4ECDC4; }
        .result h3 { color: #333; margin-bottom: 15px; }
        .result-content { background: white; padding: 15px; border-radius: 5px; border: 1px solid #e0e0e0; white-space: pre-wrap; }
        .error { background: #eef; border-left-color: #45B7D1; color: #1b6ca8; }
        .loading { text-align: center; padding: 20px; color: #4ECDC4; }
        .spinner { border: 3px solid #f3f3f3; border-top: 3px solid #4ECDC4; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 0 auto 10px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .grammar-components { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 15px; }
        .grammar-component { padding: 8px 12px; border-radius: 20px; font-size: 14px; font-weight: 500; color: white; }
        .multi-translations { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px; }
        .translation-card { background: white; padding: 15px; border-radius: 8px; border: 1px solid #e0e0e0; }
        .translation-card h4 { color: #4ECDC4; margin-bottom: 10px; }
        @media (max-width: 768px) { .language-selectors { grid-template-columns: 1fr; } .multi-translations { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>LangGraph Translation & Grammar Analysis</h1>
            <p>Powered by LangGraph and Ollama AI</p>
        </div>
        <div class="content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('translation')">Translation</button>
                <button class="tab" onclick="showTab('grammar')">Grammar Analysis</button>
                <button class="tab" onclick="showTab('multi')">Multi-Language</button>
            </div>
            <div id="translation" class="tab-content active">
                <div class="form-group">
                    <label for="sourceLang">Source Language:</label>
                    <select id="sourceLang">
                        <option value="en">English</option>
                        <option value="zh">Chinese</option>
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="es">Spanish</option>
                        <option value="it">Italian</option>
                        <option value="pt">Portuguese</option>
                        <option value="ru">Russian</option>
                        <option value="ar">Arabic</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="targetLang">Target Language:</label>
                    <select id="targetLang">
                        <option value="zh">Chinese</option>
                        <option value="en">English</option>
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="es">Spanish</option>
                        <option value="it">Italian</option>
                        <option value="pt">Portuguese</option>
                        <option value="ru">Russian</option>
                        <option value="ar">Arabic</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="textToTranslate">Text to Translate:</label>
                    <textarea id="textToTranslate" placeholder="Enter text to translate..."></textarea>
                </div>
                <button class="btn" onclick="translateText()">Translate</button>
                <div id="translationResult"></div>
            </div>
            <div id="grammar" class="tab-content">
                <div class="form-group">
                    <label for="analysisLang">Language:</label>
                    <select id="analysisLang">
                        <option value="en">English</option>
                        <option value="zh">Chinese</option>
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="es">Spanish</option>
                        <option value="it">Italian</option>
                        <option value="pt">Portuguese</option>
                        <option value="ru">Russian</option>
                        <option value="ar">Arabic</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="textToAnalyze">Text to Analyze:</label>
                    <textarea id="textToAnalyze" placeholder="Enter text to analyze..."></textarea>
                </div>
                <button class="btn" onclick="analyzeGrammar()">Analyze Grammar</button>
                <div id="analysisResult"></div>
            </div>
            <div id="multi" class="tab-content">
                <div class="form-group">
                    <label for="multiSourceLang">Source Language:</label>
                    <select id="multiSourceLang">
                        <option value="en">English</option>
                        <option value="zh">Chinese</option>
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="es">Spanish</option>
                        <option value="it">Italian</option>
                        <option value="pt">Portuguese</option>
                        <option value="ru">Russian</option>
                        <option value="ar">Arabic</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="multiText">Text to Translate:</label>
                    <textarea id="multiText" placeholder="Enter text to translate to multiple languages..."></textarea>
                </div>
                <div class="form-group">
                    <label>Target Languages:</label>
                    <div id="targetLanguages">
                        <label><input type="checkbox" value="zh" checked> Chinese</label>
                        <label><input type="checkbox" value="ja"> Japanese</label>
                        <label><input type="checkbox" value="ko"> Korean</label>
                        <label><input type="checkbox" value="fr"> French</label>
                        <label><input type="checkbox" value="de"> German</label>
                        <label><input type="checkbox" value="es"> Spanish</label>
                        <label><input type="checkbox" value="it"> Italian</label>
                        <label><input type="checkbox" value="pt"> Portuguese</label>
                        <label><input type="checkbox" value="ru"> Russian</label>
                        <label><input type="checkbox" value="ar"> Arabic</label>
                    </div>
                </div>
                <button class="btn" onclick="translateMultiple()">Translate to Selected Languages</button>
                <div id="multiResult"></div>
            </div>
        </div>
    </div>
    <script>
        const API_BASE_URL = window.location.origin;
        function showTab(tabName) { document.querySelectorAll('.tab-content').forEach(t=>t.classList.remove('active')); document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active')); document.getElementById(tabName).classList.add('active'); event.target.classList.add('active'); }
        function showLoading(id) { const el=document.getElementById(id); el.innerHTML = `<div class="loading"><div class="spinner"></div><p>Processing...</p></div>`; }
        function showError(id, msg) { const el=document.getElementById(id); el.innerHTML = `<div class="result error"><h3>Error</h3><div class="result-content">${msg}</div></div>`; }
        function showTranslationResult(result) { const el=document.getElementById('translationResult'); if (result.error) { el.innerHTML = `<div class="result error"><h3>Error</h3><div class="result-content">${result.error}</div></div>`; } else { el.innerHTML = `<div class="result"><h3>Translation Result</h3><div class="result-content">${result.translated_text}</div><p><strong>Confidence:</strong> ${(result.confidence * 100).toFixed(1)}%</p></div>`; } }
        function showAnalysisResult(result) { const el=document.getElementById('analysisResult'); if (result.error) { el.innerHTML = `<div class="result error"><h3>Error</h3><div class="result-content">${result.error}</div></div>`; } else { let comps=''; if (result.components && result.components.length>0){ comps='<div class="grammar-components">'; result.components.forEach(c=>{ comps+=`<div class="grammar-component" style="background-color: ${c.color}">${c.component} (${c.type})</div>`; }); comps+='</div>'; } el.innerHTML = `<div class="result"><h3>Grammar Analysis Result</h3><div class="result-content">${result.text}</div>${comps}</div>`; } }
        function showMultiTranslationResult(results) { const el=document.getElementById('multiResult'); let html='<div class="multi-translations">'; const names={ zh:'Chinese', ja:'Japanese', ko:'Korean', fr:'French', de:'German', es:'Spanish', it:'Italian', pt:'Portuguese', ru:'Russian', ar:'Arabic' }; for (const [lang, res] of Object.entries(results)) { html+=`<div class="translation-card"><h4>${names[lang]||lang}</h4><div class="result-content">${res.error ? `<span style='color:red;'>${res.error}</span>` : res.translated_text}</div></div>`; } html+='</div>'; el.innerHTML = html; }
        async function translateText() { const text=document.getElementById('textToTranslate').value; const s=document.getElementById('sourceLang').value; const t=document.getElementById('targetLang').value; if (!text.trim()) { showError('translationResult','Please enter text to translate'); return; } showLoading('translationResult'); try { const r=await fetch(`${API_BASE_URL}/api/translateText`, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ text, source_language:s, target_language:t }) }); const j=await r.json(); showTranslationResult(j); } catch(e){ showError('translationResult','Failed to connect to translation service: '+e.message); } }
        async function analyzeGrammar() { const text=document.getElementById('textToAnalyze').value; const l=document.getElementById('analysisLang').value; if(!text.trim()){ showError('analysisResult','Please enter text to analyze'); return; } showLoading('analysisResult'); try { const r=await fetch(`${API_BASE_URL}/api/analyzeGrammar`, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ text, language:l }) }); const j=await r.json(); showAnalysisResult(j); } catch(e){ showError('analysisResult','Failed to connect to analysis service: '+e.message); } }
        async function translateMultiple() { const text=document.getElementById('multiText').value; const s=document.getElementById('multiSourceLang').value; if (!text.trim()) { showError('multiResult','Please enter text to translate'); return; } const cbs=document.querySelectorAll('#targetLanguages input[type="checkbox"]:checked'); const targets=Array.from(cbs).map(cb=>cb.value); if(targets.length===0){ showError('multiResult','Please select at least one target language'); return; } showLoading('multiResult'); try { const r=await fetch(`${API_BASE_URL}/api/translateMultiple?text=${encodeURIComponent(text)}&source_language=${s}`, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(targets) }); const j=await r.json(); showMultiTranslationResult(j); } catch(e){ showError('multiResult','Failed to connect to translation service: '+e.message); } }
    </script>
</body>
</html>
